{% extends "layout.html" %}

{% block title %}
    Index of Stocks
{% endblock %}

{% block main %}





<table class="table">
  <thead class="thead-dark">
    <tr>
      <th scope="col">#</th>
      <th scope="col">Stock Symbol</th>
      <th scope="col">Company Name</th>
      <th scope="col">Share Qty</th>
      <th scope="col">Current Price</th>
      <th scope="col">Current Value</th>
    </tr>
  </thead>
  <tbody>

    {% for g in groups %}
    {% set stock = lookup( g.symbol ) %}

    <tr>
      <th scope="row">{{ loop.index }}</th>
      <td>{{ g.symbol }}</td>
      <td>{{ stock.name }}</td>
      <td>{{ g.SUM}}</td>
      <td>{{ "$%.2f" | format(stock.price) }}</td>
      <td>{{ "$%.2f" | format(g.SUM * stock.price) }}</td>

    </tr>
    {% endfor %}

    <tr>
      <td>Current Balance:</td>
      <td>{{ "$%.2f" | format(cashValue) }}</td>
    </tr>
    <tr>
      <td>Grand Total:</td>
      <td>$$$</td>
    </tr>
</table>

{% endblock %}
